<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Проверка вложенности прямоугольников</title>
</head>
<body>
    <h1>Проверка вложенности прямоугольников</h1>
    
    <div>
        <h2>Условие задачи:</h2>
        <p>Даны вещественные положительные числа a, b, c, d.</p>
        <p>Выясните, может ли прямоугольник со сторонами a, b уместиться внутри прямоугольника со сторонами c, d так, чтобы каждая сторона внутреннего прямоугольника была параллельна или перпендикулярна стороне внешнего прямоугольника.</p>
    </div>
    
    <div>
        <h2>Введите значения:</h2>
        <form id="rectangleForm">
            <p>
                <label>Сторона a (внутренний прямоугольник): 
                    <input type="number" id="sideA" step="0.01" min="0.01" required>
                </label>
            </p>
            <p>
                <label>Сторона b (внутренний прямоугольник): 
                    <input type="number" id="sideB" step="0.01" min="0.01" required>
                </label>
            </p>
            <p>
                <label>Сторона c (внешний прямоугольник): 
                    <input type="number" id="sideC" step="0.01" min="0.01" required>
                </label>
            </p>
            <p>
                <label>Сторона d (внешний прямоугольник): 
                    <input type="number" id="sideD" step="0.01" min="0.01" required>
                </label>
            </p>
            <p>
                <button type="button" onclick="checkRectangles()">Проверить</button>
                <button type="button" onclick="clearForm()">Очистить</button>
                <button type="button" onclick="sendToBing()">Отправить в Bing</button>
            </p>
        </form>
    </div>
    
    <div id="result"></div>
    
    <div>
        <h2>Объяснение решения:</h2>
        <p>Прямоугольник со сторонами a и b может поместиться внутри прямоугольника со сторонами c и d в двух случаях:</p>
        <ol>
            <li>Если a ≤ c и b ≤ d (прямоугольник помещается без поворота)</li>
            <li>Если a ≤ d и b ≤ c (прямоугольник помещается с поворотом на 90°)</li>
        </ol>
        <p>Таким образом, достаточно проверить выполнение условия: (a ≤ c и b ≤ d) ИЛИ (a ≤ d и b ≤ c)</p>
    </div>

    <script>
        let currentResult = null;

        function checkRectangles() {
            // Получаем значения из формы
            const a = parseFloat(document.getElementById('sideA').value);
            const b = parseFloat(document.getElementById('sideB').value);
            const c = parseFloat(document.getElementById('sideC').value);
            const d = parseFloat(document.getElementById('sideD').value);
            
            // Проверяем, что все значения положительные
            if (a <= 0 || b <= 0 || c <= 0 || d <= 0) {
                document.getElementById('result').innerHTML = 
                    "<p style='color:red'>Ошибка: все стороны должны быть положительными числами!</p>";
                currentResult = null;
                return;
            }
            
            // Проверяем условие вложенности
            const fitsWithoutRotation = (a <= c) && (b <= d);
            const fitsWithRotation = (a <= d) && (b <= c);
            const fits = fitsWithoutRotation || fitsWithRotation;
            
            // Сохраняем результат для отправки
            currentResult = {
                a: a,
                b: b,
                c: c,
                d: d,
                fits: fits,
                fitsWithoutRotation: fitsWithoutRotation,
                fitsWithRotation: fitsWithRotation,
                timestamp: new Date().toISOString()
            };
            
            // Формируем результат
            let resultHTML = "<h2>Результат:</h2>";
            
            if (fits) {
                resultHTML += "<p style='color:green'>Прямоугольник со сторонами " + a + " и " + b + 
                             " МОЖЕТ поместиться внутри прямоугольника со сторонами " + c + " и " + d + ".</p>";
                
                if (fitsWithoutRotation) {
                    resultHTML += "<p>Прямоугольник помещается без поворота (a ≤ c и b ≤ d).</p>";
                } else {
                    resultHTML += "<p>Прямоугольник помещается с поворотом на 90° (a ≤ d и b ≤ c).</p>";
                }
            } else {
                resultHTML += "<p style='color:red'>Прямоугольник со сторонами " + a + " и " + b + 
                             " НЕ МОЖЕТ поместиться внутри прямоугольника со сторонами " + c + " и " + d + ".</p>";
            }
            
            // Добавляем подробное объяснение
            resultHTML += "<h3>Подробное объяснение:</h3>";
            resultHTML += "<p>Проверяемые условия:</p>";
            resultHTML += "<ul>";
            resultHTML += "<li>Без поворота: " + a + " ≤ " + c + " и " + b + " ≤ " + d + " → " + 
                         (a <= c ? "да" : "нет") + " и " + (b <= d ? "да" : "нет") + " → " + 
                         (fitsWithoutRotation ? "выполняется" : "не выполняется") + "</li>";
            resultHTML += "<li>С поворотом: " + a + " ≤ " + d + " и " + b + " ≤ " + c + " → " + 
                         (a <= d ? "да" : "нет") + " и " + (b <= c ? "да" : "нет") + " → " + 
                         (fitsWithRotation ? "выполняется" : "не выполняется") + "</li>";
            resultHTML += "</ul>";
            resultHTML += "<p>Итог: " + (fitsWithoutRotation ? "первое" : "второе") + 
                         " условие " + (fits ? "выполняется" : "не выполняется") + "</p>";
            
            // Добавляем кнопку отправки в Bing
            resultHTML += "<button type='button' onclick='sendToBing()' style='margin-top: 10px; padding: 8px 16px; background-color: #008373; color: white; border: none; border-radius: 4px; cursor: pointer;'>Отправить результат в Bing</button>";
            
            document.getElementById('result').innerHTML = resultHTML;
        }
        
        function clearForm() {
            document.getElementById('sideA').value = '';
            document.getElementById('sideB').value = '';
            document.getElementById('sideC').value = '';
            document.getElementById('sideD').value = '';
            document.getElementById('result').innerHTML = '';
            currentResult = null;
        }
        
        function sendToBing() {
            if (!currentResult) {
                alert("Сначала выполните проверку прямоугольников!");
                return;
            }
            
            const resultDiv = document.getElementById('result');
            const originalContent = resultDiv.innerHTML;
            
            // Показываем уведомление о отправке
            resultDiv.innerHTML += "<p style='color:blue'>Отправка данных в Bing...</p>";
            
            // Создаем данные для отправки
            const bingData = {
                rectangleCheck: currentResult,
                userAgent: navigator.userAgent,
                language: navigator.language,
                timestamp: new Date().toISOString()
            };
            
            // Отправка данных с помощью Bing Webmaster Tools API или через форму
            // ВАЖНО: Для реальной отправки нужен API ключ и endpoint от Bing
            const bingEndpoint = 'https://api.bing.com/webmaster/tools/submit'; // Пример endpoint
            
            // Демонстрационная отправка (замените на реальный endpoint)
            fetch(bingEndpoint, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    // 'Authorization': 'Bearer YOUR_BING_API_KEY' // Добавьте API ключ если есть
                },
                body: JSON.stringify(bingData)
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Ошибка сети: ' + response.status);
                }
                return response.text();
            })
            .then(data => {
                resultDiv.innerHTML = originalContent;
                resultDiv.innerHTML += "<p style='color:green'>Данные успешно отправлены в Bing!</p>";
                console.log('Успех отправки в Bing:', data);
            })
            .catch((error) => {
                resultDiv.innerHTML = originalContent;
                
                // Альтернативный метод отправки через поисковый запрос
                const searchQuery = `Проверка прямоугольников: a=${currentResult.a}, b=${currentResult.b}, c=${currentResult.c}, d=${currentResult.d}, результат=${currentResult.fits ? 'помещается' : 'не помещается'}`;
                const bingSearchUrl = `https://www.bing.com/search?q=${encodeURIComponent(searchQuery)}`;
                
                resultDiv.innerHTML += `
                    <div style='margin-top: 10px; padding: 10px; background-color: #f0f0f0; border-radius: 5px;'>
                        <p style='color:orange'>Сервер Bing временно недоступен. Альтернативные варианты:</p>
                        <p>1. <a href="${bingSearchUrl}" target="_blank">Открыть поисковый запрос в Bing</a></p>
                        <p>2. Данные для ручной отправки: ${JSON.stringify(currentResult)}</p>
                        <p>3. <button onclick="copyToClipboard()" style='padding: 5px 10px;'>Скопировать данные</button></p>
                    </div>
                `;
                console.error('Ошибка отправки в Bing:', error);
            });
        }
        
        function copyToClipboard() {
            if (!currentResult) return;
            
            const textToCopy = JSON.stringify(currentResult, null, 2);
            navigator.clipboard.writeText(textToCopy).then(() => {
                alert('Данные скопированы в буфер обмена!');
            }).catch(err => {
                console.error('Ошибка копирования: ', err);
            });
        }
        
        // Добавляем обработчик события для кнопки Enter
        document.getElementById('rectangleForm').addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                checkRectangles();
            }
        });
    </script>
</body>
</html>
